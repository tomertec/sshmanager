<ui:FluentWindow x:Class="SshManager.App.Views.Dialogs.RecordingPlaybackDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 xmlns:controls="clr-namespace:SshManager.Terminal.Controls;assembly=SshManager.Terminal"
                 Title="{Binding RecordingTitle}"
                 Width="1000"
                 Height="700"
                 WindowStartupLocation="CenterOwner"
                 ExtendsContentIntoTitleBar="True"
                 WindowBackdropType="Mica">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <ui:TitleBar Grid.Row="0"
                     Title="{Binding RecordingTitle}"
                     ShowMaximize="True"
                     ShowMinimize="False" />

        <!-- Terminal Display -->
        <Border Grid.Row="1"
                Margin="10"
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="4">
            <controls:WebTerminalControl x:Name="TerminalControl"/>
        </Border>

        <!-- Playback Controls -->
        <Border Grid.Row="2"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                BorderThickness="0,1,0,0"
                Padding="20,15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Timeline and Time Display -->
                <Grid Grid.Row="0" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="{Binding Position, StringFormat=hh\\:mm\\:ss}"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0"/>

                    <Slider Grid.Column="1"
                            Minimum="0"
                            Maximum="{Binding Duration.TotalSeconds}"
                            Value="{Binding PositionSeconds}"
                            TickFrequency="1"
                            IsSnapToTickEnabled="True"
                            VerticalAlignment="Center"/>

                    <TextBlock Grid.Column="2"
                               Text="{Binding Duration, StringFormat=hh\\:mm\\:ss}"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"/>
                </Grid>

                <!-- Control Buttons -->
                <StackPanel Grid.Row="1"
                            Orientation="Horizontal"
                            HorizontalAlignment="Center">
                    <ui:Button Icon="{ui:SymbolIcon Symbol=Play24}"
                               Content="{Binding PlayPauseButtonText}"
                               Command="{Binding PlayPauseCommand}"
                               Appearance="Primary"
                               Margin="0,0,10,0"/>

                    <ui:Button Icon="{ui:SymbolIcon Symbol=Stop24}"
                               Content="Stop"
                               Command="{Binding StopCommand}"
                               Margin="0,0,20,0"/>

                    <TextBlock Text="Speed:"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0"/>

                    <ComboBox ItemsSource="{Binding SpeedOptions}"
                              SelectedItem="{Binding SelectedSpeed}"
                              Width="80"
                              VerticalAlignment="Center">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding StringFormat={}{0}x}"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</ui:FluentWindow>
