<UserControl x:Class="SshManager.Terminal.Controls.TerminalFindOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Focusable="True"
             KeyDown="UserControl_KeyDown">
    <Border Background="#E0202020"
            BorderBrush="#555555"
            BorderThickness="1"
            CornerRadius="6"
            Padding="8,6"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Margin="8,40,8,8">
        <Border.Effect>
            <DropShadowEffect BlurRadius="8"
                              ShadowDepth="2"
                              Opacity="0.3" />
        </Border.Effect>

        <StackPanel Orientation="Horizontal">
            <!-- Search TextBox -->
            <TextBox x:Name="SearchTextBox"
                     Width="200"
                     Padding="6,4"
                     Background="#333333"
                     Foreground="White"
                     BorderThickness="1"
                     BorderBrush="#555555"
                     VerticalContentAlignment="Center"
                     FontFamily="Segoe UI"
                     FontSize="12"
                     TextChanged="SearchTextBox_TextChanged"
                     PreviewKeyDown="SearchTextBox_PreviewKeyDown">
                <TextBox.CaretBrush>
                    <SolidColorBrush Color="White" />
                </TextBox.CaretBrush>
            </TextBox>

            <!-- Match Counter -->
            <TextBlock x:Name="MatchCountText"
                       Text="0/0"
                       Foreground="#AAAAAA"
                       VerticalAlignment="Center"
                       FontFamily="Segoe UI"
                       FontSize="11"
                       Margin="8,0,4,0"
                       MinWidth="40" />

            <!-- Previous Match Button -->
            <Button x:Name="PreviousButton"
                    Content="&#x25B2;"
                    ToolTip="Previous match (Shift+F3)"
                    Width="26" Height="26"
                    Padding="0"
                    Margin="2,0"
                    Click="PreviousButton_Click"
                    IsEnabled="False">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="#444444"
                                BorderBrush="#555555"
                                BorderThickness="1"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              TextBlock.Foreground="#CCCCCC"
                                              TextBlock.FontSize="10" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#555555" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#666666" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>

            <!-- Next Match Button -->
            <Button x:Name="NextButton"
                    Content="&#x25BC;"
                    ToolTip="Next match (F3 or Enter)"
                    Width="26" Height="26"
                    Padding="0"
                    Margin="2,0"
                    Click="NextButton_Click"
                    IsEnabled="False">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="#444444"
                                BorderBrush="#555555"
                                BorderThickness="1"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              TextBlock.Foreground="#CCCCCC"
                                              TextBlock.FontSize="10" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#555555" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#666666" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>

            <!-- Case Sensitive Toggle -->
            <ToggleButton x:Name="CaseSensitiveToggle"
                          Content="Aa"
                          ToolTip="Case sensitive"
                          Width="26" Height="26"
                          Padding="0"
                          Margin="4,0"
                          Click="CaseSensitiveToggle_Click">
                <ToggleButton.Template>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border x:Name="border"
                                Background="#444444"
                                BorderBrush="#555555"
                                BorderThickness="1"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              TextBlock.Foreground="#CCCCCC"
                                              TextBlock.FontSize="10"
                                              TextBlock.FontWeight="Bold" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#555555" />
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#007ACC" />
                                <Setter TargetName="border" Property="BorderBrush" Value="#007ACC" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </ToggleButton.Template>
            </ToggleButton>

            <!-- Close Button -->
            <Button x:Name="CloseButton"
                    Content="&#x2715;"
                    ToolTip="Close (Escape)"
                    Width="26" Height="26"
                    Padding="0"
                    Margin="4,0,0,0"
                    Click="CloseButton_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="#444444"
                                BorderBrush="#555555"
                                BorderThickness="1"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              TextBlock.Foreground="#CCCCCC"
                                              TextBlock.FontSize="10" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#AA4444" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#CC5555" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </StackPanel>
    </Border>
</UserControl>
