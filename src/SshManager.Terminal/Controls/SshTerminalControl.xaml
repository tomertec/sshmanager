<UserControl x:Class="SshManager.Terminal.Controls.SshTerminalControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:SshManager.Terminal.Controls"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800"
             Background="#0C0C0C"
             KeyDown="UserControl_KeyDown">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Terminal Control - uses WebView2-based xterm.js rendering -->
        <local:WebTerminalControl x:Name="TerminalHost"
                                   Grid.Row="0"
                                   MinHeight="100"
                                   MinWidth="200"
                                   Focusable="True"/>

        <!-- Status Bar -->
        <local:TerminalStatusBar x:Name="StatusBar"
                                  Grid.Row="1"
                                  Visibility="Collapsed"/>

        <!-- Find Overlay - positioned at top-right of terminal -->
        <!-- Note: Due to HwndHost airspace constraints, this overlay appears above the terminal
             but may not overlap perfectly with terminal content during rendering -->
        <local:TerminalFindOverlay x:Name="FindOverlay"
                                    Grid.Row="0"
                                    Visibility="Collapsed"
                                    Panel.ZIndex="100"/>

        <!-- Status Overlay (Connecting/Disconnected messages) -->
        <Border x:Name="StatusOverlay"
                Grid.Row="0"
                Background="#CC000000"
                Visibility="Collapsed"
                Panel.ZIndex="50">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                <ProgressBar x:Name="StatusProgress"
                             IsIndeterminate="True"
                             Width="200"
                             Height="4"
                             Margin="0,0,0,12"
                             Visibility="Collapsed"/>
                <TextBlock x:Name="StatusText"
                           Foreground="White"
                           FontSize="14"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
